<!DOCTYPE html>

<head>
    <script type="text/javascript" src="js/util/time.js"></script>
    <script type="text/javascript" src="js/util/thread.js"></script>
    <script type="text/javascript" src="js/canvas/graph.js"></script>
    <script type="text/javascript" src="js/data/telemetry.js"></script>

    <title>My Website</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <script>
        window.onload = function() {
            var canvas = document.getElementById("myCanvas");
            console.log("canvas width "+canvas.width);
          
            const t = new Telemetry("Versuch-1");
            for(var i=1; i<=5; i++) {
                t.sample(Math.random());
                //console.log(i + " t is "+t)    
            }
            console.log("first time = "+t.getFirstTime());
            console.log("last time  = "+t.getLastTime());
            drawTelemetryAsBars(t,canvas);

            function receiveData() {
                t.sample(Math.random());
                drawTelemetryAsBars(t,canvas);
            }

            for(var i=1; i<=50000; i++) {
                delay(100*i).then(
                     () => {
                        receiveData();
                     });
            }    
        };

        function loadDoc() {
            const xhttp = new XMLHttpRequest();
            xhttp.onload = function() {
              document.getElementById("demo").innerHTML = this.responseText;
              }
            xhttp.open("GET", "ajax_info.txt", true);
            xhttp.send();
          }
    </script>


    <div id="demo">
        <h2>Let AJAX change this text</h2>
        <button type="button" onclick="loadDoc()">Change Content</button>
    </div>

    <div class="center">
        <h1>FH 5 - Telemetry</h1>
        <p>Sample</p>
        <canvas class="telemetry" id="myCanvas" width="2000" height="200"></canvas>
    </div>
</body>
